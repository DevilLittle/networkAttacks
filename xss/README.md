## XSS攻击及防御

* 何为XSS
XSS称为跨站脚本攻击(cross site script)，是一种在web应用中的计算机安全漏洞。

XSS是恶意攻击者利用网站没有对用户提交的数据进行转义处理或者过滤不足的缺点，进而添加一些代码，嵌入到web页面中去，使得别的用户访问时都会执行相应的嵌入代码。
从而盗取用户资料，利用用户身份进行某种动作或者对访问者进行病毒侵害的一种攻击方式。

* XSS攻击的危害
1、盗取各类用户账号，如机器登录账号、用户网银账号、各类管理员账号;
2、控制企业数据，包括读取、篡改、添加和删除企业敏感数据的能力;
3、盗取企业重要的具有商业价值的资料;
4、非法转账;
5、强制发送电子邮件;
6、网站挂马;
7、控制受害者机器向其他网站发起攻击;

* 原因和预防
这类攻击出现的原因主要是太过相信客户端提交的数据，客户端提交的数据本来是应用所需，但是恶意攻击者利用网站对客户端提交的数据的信任，在数据中插入恶意攻击代码
对网站进行攻击。

预防：对客户端提交的数据做转义或者过滤后再使用。

* XSS攻击的分类
XSS攻击主要有三大类：
1、反射型
反射型是最常见的XSS攻击，又称为非持久型跨站脚本攻击。发出请求时，XSS代码出现在URL中，作为输入提交到服务器端，服务器端解析后响应，XSS随响应内容一起返回给
浏览器，最后浏览器解析执行时连XSS代码一起执行。
由于每次提交时才会执行，所以它是一次性的，经过后端，但是不经过数据库。
2、存储型
存储型又称为持久型跨站脚本攻击，存储型与反射型主要的区别在于，存储型存储在服务端(数据库，内存，文件系统等)，当一个页面被用户打开的时候执行。每当打开浏览器，
执行脚本。持久型比非持久型的危害更大。
存储型经过后端，经过数据库。
3、DOMBasedXSS(基于DOM的跨站脚本攻击)
基于DOM的XSS有事也称为type0XSS，当用户能够通过交互修改浏览器中的DOM并显示在浏览器上时，就有可能出现这种漏洞，从效果上来说它也是反射型XSS。
前提是易受攻击的网站有一个HTML页面，采用不安全的方式从document.location或者document.URL或者document.referrer获取数据(或者任何其他攻击者可以修改的对象)。

